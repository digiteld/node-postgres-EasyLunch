
function ins_function_geo()


CREATE FUNCTION ins_function_geo() RETURNS trigger AS '

BEGIN
	UPDATE restaurants SET geom = ST_SetSRID(ST_MakePoint(cast(NEW.lon as numeric),cast(NEW.lat as numeric)),4326);
END
' LANGUAGE plpgsql;


TRIGGER 


CREATE OR REPLACE TRIGGER restaurants_ins AFTER INSERT OR UPDATE
        ON restaurants FOR each ROW
        EXECUTE PROCEDURE ins_function_geo();

